# Nginx - Complete Server Header Obfuscation

# Method 1: Hide server header completely (requires recompiling nginx)
# OR
# Method 2: Change it to something else (requires headers-more module)

# ============================================================================
# Method 1: Compile nginx with custom server string (most secure)
# ============================================================================
# This requires recompiling nginx from source with --with-http_gzip_static_module
# and modifying src/http/ngx_http_header_filter_module.c

# ============================================================================
# Method 2: Use headers-more-nginx-module (easiest)
# ============================================================================

# Install the module:
# Ubuntu/Debian:
#   sudo apt install libnginx-mod-http-headers-more-filter
#
# Then in your nginx config:

# Option A: Remove Server header entirely
more_clear_headers 'Server';

# Option B: Replace with fake Apache header
more_set_headers 'Server: Apache/2.4.41 (Ubuntu)';

# Option C: Replace with fake IIS header
# more_set_headers 'Server: Microsoft-IIS/10.0';

# Option D: Replace with custom/obfuscated name
# more_set_headers 'Server: WebServer';

# ============================================================================
# Method 3: Using standard nginx (limited)
# ============================================================================
# Without headers-more module, you can only hide the version:

server_tokens off;

# This changes:
#   FROM: Server: nginx/1.18.0
#   TO:   Server: nginx
# But still reveals it's nginx

# ============================================================================
# Installation Instructions
# ============================================================================

# Check if headers-more module is available:
# nginx -V 2>&1 | grep -o headers-more
#
# If not found, install it:
# sudo apt update
# sudo apt install libnginx-mod-http-headers-more-filter
#
# Then restart nginx:
# sudo systemctl restart nginx

# ============================================================================
# Complete Example Configuration
# ============================================================================

server {
    listen 443 ssl http2;
    server_name reader.gheop.com;

    # Hide version (minimum)
    server_tokens off;

    # If headers-more is available, uncomment:
    # more_clear_headers 'Server';
    # OR
    # more_set_headers 'Server: Apache/2.4.41';

    # Rest of your config...

    location / {
        # Also hide X-Powered-By from PHP
        fastcgi_hide_header X-Powered-By;
    }
}
